<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JCR Setups Lab üß™</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#000435;
      --panel:#070a3d;
      --gold:#d4af37;
      --red1:#b30000;
      --red2:#ff1a1a;
      --white:#ffffff;
    }

    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
    body { background: var(--bg); color: var(--white); min-height: 100vh; }

    /* ---------- Navbar ---------- */
    .navbar{
      position: sticky;
      top: 0;
      z-index: 1000;
      width: 100%;
      background: rgba(0, 4, 53, 0.85);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(212, 175, 55, 0.25);
    }
    .nav-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 14px 20px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 16px;
    }
    .brand{
      color: var(--gold);
      text-decoration:none;
      font-weight:600;
      letter-spacing:0.5px;
      white-space: nowrap;
    }
    .nav-links{
      display:flex;
      align-items:center;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .nav-links a{
      color: var(--white);
      text-decoration:none;
      opacity:0.9;
    }
    .nav-links a:hover{ opacity: 1; }

    .basket-btn{
      background: transparent;
      border: 2px solid var(--gold);
      color: var(--white);
      padding: 8px 14px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 600;
      display:flex;
      align-items:center;
      gap: 8px;
    }
    .basket-count{
      background: var(--gold);
      color: var(--bg);
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 700;
      line-height: 1.2;
    }

    /* ---------- Header ---------- */
    header{ text-align:center; padding: 80px 20px; }
    header h1{ font-size: 3rem; font-weight: 600; }
    .logo{ width: 280px; margin-bottom: 20px; border: 2px solid var(--gold); }
    .tagline{ color: var(--gold); font-size: 1.3rem; margin-top: 10px; opacity: 0.95; }

    /* ---------- Buttons ---------- */
    .btn{
      display:inline-block;
      margin-top: 30px;
      padding: 14px 36px;
      background: linear-gradient(135deg, var(--red1), var(--red2));
      color: var(--white);
      text-decoration:none;
      border-radius: 30px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: 0.25s;
      text-align:center;
    }
    .btn:hover{
      background: linear-gradient(135deg, var(--red2), #ff4d4d);
      transform: scale(1.05);
    }
    .btn.small{
      padding: 12px 20px;
      margin-top: auto;
      align-self: center;
    }

    /* ---------- Sections ---------- */
    section{
      margin: 60px auto;
      padding: 0 20px;
      text-align:center;
      line-height: 1.7;
      max-width: 900px;
    }
    section h2{
      font-size: 2.2rem;
      margin-bottom: 20px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .features-wrapper{
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* ---------- What we offer cards ---------- */
    .features{
      display:flex;
      gap: 30px;
      margin-top: 50px;
      justify-content: space-between;
      align-items: stretch;
    }
    .card{
      background: linear-gradient(135deg, var(--red1), var(--red2));
      border: 3px solid var(--gold);
      border-radius: 18px;
      padding: 30px;
      flex: 1;
      text-align: center;
      transition: 0.25s;
    }
    .card h3{ margin-bottom: 10px; font-size: 1.2rem; }
    .card p{ opacity: 0.95; }
    .card:hover{
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.5);
    }

    /* ---------- Pricing ---------- */
    .pricing-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 22px;
      margin-top: 18px;
      text-align: left;
    }

    .price-card{
      background: rgba(255,255,255,0.06);
      border: 2px solid rgba(212,175,55,0.35);
      border-radius: 18px;
      padding: 38px 26px 26px; /* extra top padding for badge */
      position: relative;
      transition: 0.25s;
      display:flex;
      flex-direction: column;
      min-height: 320px;

      /* stagger initial state (only used for pricing cards; league overrides below) */
      opacity: 0;
      transform: translateY(18px);
      will-change: opacity, transform;
    }
    .price-card:hover{
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.45);
    }

    /* centered gold badge ABOVE card */
    .badge{
      position:absolute;
      top: -14px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--gold);
      color: var(--bg);
      font-weight: 700;
      font-size: 0.75rem;
      padding: 6px 14px;
      border-radius: 999px;
      white-space: nowrap;
      z-index: 2;
      box-shadow: 0 6px 18px rgba(212,175,55,0.45);
      letter-spacing: 0.5px;
    }

    .price{
      font-size: 2.2rem;
      font-weight: 700;
      margin: 10px 0 14px;
      color: var(--white);
    }
    .price-card ul{
      list-style:none;
      padding-left:0;
      margin: 0 0 18px;
      opacity: 0.95;
    }
    .price-card li{ margin: 10px 0; }

    /* Featured card (BEST VALUE) */
    .price-card.featured{
      border-color: var(--gold);
      box-shadow: 0 0 0 2px rgba(212,175,55,0.18);
      z-index: 3;
    }

    /* Hover rules (avoid transform conflicts) */
    .price-card:not(.featured):hover{ transform: translateY(-4px); }
    .price-card.featured:hover{ transform: translateY(-2px) scale(1.04); }

    /* Badge float for featured */
    @keyframes badgeFloat{
      0%   { transform: translateX(-50%) translateY(0); }
      50%  { transform: translateX(-50%) translateY(-4px); }
      100% { transform: translateX(-50%) translateY(0); }
    }
    .price-card.featured .badge{
      animation: badgeFloat 2.5s ease-in-out infinite;
      box-shadow: 0 6px 18px rgba(212,175,55,0.55);
    }

    /* Premium glow for featured (only after reveal) */
    @keyframes premiumGlow{
      0%   { box-shadow: 0 0 0 rgba(212,175,55,0.18); }
      50%  { box-shadow: 0 0 24px rgba(212,175,55,0.38); }
      100% { box-shadow: 0 0 0 rgba(212,175,55,0.18); }
    }

    /* ---------- Stagger reveal (pricing cards) ---------- */
    .price-card.is-visible{
      opacity: 1;
      transform: translateY(0);
      transition: opacity 650ms ease, transform 650ms ease;
    }
    .price-card.featured.is-visible{
      transform: translateY(0) scale(1.02);
      animation: premiumGlow 3.5s ease-in-out infinite;
    }

    @media (prefers-reduced-motion: reduce){
      .price-card, .price-card.is-visible{
        opacity: 1 !important;
        transform: none !important;
        transition: none !important;
        animation: none !important;
      }
      .price-card.featured .badge{ animation: none !important; }
    }

    /* ---------- JCR League section ---------- */
    #league{ margin-top: 80px; }

    /* League card should NOT start hidden */
    #league .price-card{
      opacity: 1;
      transform: none;
      transition: 0.25s;
    }

    .league-features{
      list-style:none;
      padding:0;
      margin: 20px 0;
      text-align:left;
      opacity: 0.98;
    }
    .league-features li{ margin: 10px 0; }
    .league-note{
      margin-top: 16px;
      opacity: 0.9;
      font-style: italic;
    }

    /* ---------- Basket Drawer ---------- */
    .basket-overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: none;
      z-index: 1100;
    }
    .basket-drawer{
      position: fixed;
      top: 0;
      right: 0;
      height: 100vh;
      width: min(420px, 92vw);
      background: var(--panel);
      border-left: 2px solid rgba(212,175,55,0.35);
      transform: translateX(100%);
      transition: 0.25s;
      z-index: 1200;
      display:flex;
      flex-direction: column;
    }
    .basket-drawer.open{ transform: translateX(0); }

    .basket-header{
      padding: 18px 18px 12px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }
    .icon-btn{
      background: transparent;
      border: 1px solid rgba(212,175,55,0.5);
      color: var(--white);
      border-radius: 10px;
      padding: 6px 10px;
      cursor: pointer;
    }

    .basket-items{
      padding: 14px 18px;
      flex: 1;
      overflow: auto;
    }
    .basket-item{
      display:flex;
      justify-content: space-between;
      gap: 12px;
      padding: 12px;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 14px;
      margin-bottom: 12px;
      background: rgba(255,255,255,0.04);
    }
    .basket-item strong{ display:block; margin-bottom: 6px; }

    .remove-btn{
      background: transparent;
      border: 1px solid rgba(255,255,255,0.15);
      color: var(--white);
      border-radius: 12px;
      padding: 6px 10px;
      cursor:pointer;
      opacity: 0.9;
      height: fit-content;
    }

    .basket-footer{
      padding: 14px 18px 18px;
      border-top: 1px solid rgba(255,255,255,0.08);
    }
    .basket-total{
      display:flex;
      justify-content: space-between;
      align-items:center;
      margin-bottom: 10px;
    }
    .basket-note{ opacity: 0.9; margin-bottom: 12px; }
    .checkout-buttons{ display:grid; gap: 10px; }

    .pay-btn{
      display:block;
      text-align:center;
      padding: 12px 14px;
      border-radius: 999px;
      text-decoration:none;
      font-weight: 700;
      color: var(--white);
      border: 2px solid rgba(212,175,55,0.35);
      transition: 0.2s;
    }
    .pay-btn.stripe{ background: linear-gradient(135deg, var(--red1), var(--red2)); }
    .pay-btn.paypal{ background: rgba(255,255,255,0.08); }
    .basket-small{ display:block; margin-top: 10px; opacity: 0.75; }

    /* ---------- Responsive ---------- */
    @media (max-width: 900px){
      .features{ flex-direction: column; }
      .pricing-grid{ grid-template-columns: 1fr; }
      header h1{ font-size: 2.3rem; }
    }

    footer{ text-align:center; padding: 30px; opacity: 0.7; font-size: 0.9rem; }
  </style>
</head>

<body>
  <nav class="navbar">
    <div class="nav-inner">
      <a class="brand" href="#top">JCR Setups Lab</a>

      <div class="nav-links">
        <a href="#pricing">Pricing</a>
        <a href="#league">JCR League</a>
        <button class="basket-btn" type="button" onclick="toggleBasket(true)">
          Basket <span class="basket-count" id="basketCount">0</span>
        </button>
      </div>
    </div>
  </nav>

  <header id="top">
    <img src="https://github.com/jcrjack/jcr-setups-lab/blob/main/logo.png?raw=true" alt="JCR Setup Lab Logo" class="logo">
    <h1>JCR Setups Lab</h1>
    <p class="tagline">Precision. Performance. Perfection.</p>
    <a href="https://discord.gg/Er2efYPu" class="btn" target="_blank" rel="noopener noreferrer">Join the Discord</a>
  </header>

  <section>
    <p>
      Welcome to JCR Setups Lab ‚Äî the home of precision engineering for F1 25.
      Purchase to gain full access to pro-tested setups and strategies designed to give you the edge.
      <br><br>
      Setups are updated frequently to maximise pace. Premium members receive access to 1-to-1 support tickets
      to fine-tune setups to their driving style.
      <br><br>
      Engineered in the lab. Proven on the track.
    </p>
  </section>

  <section>
    <h2>What Do We Offer?</h2>
    <div class="features-wrapper">
      <div class="features">
        <div class="card">
          <h3>üî• Setups + Strategies for every track!</h3>
          <p>Proven and perfected F1 25 setups and strategies created and used by esports-experienced drivers.</p>
        </div>
        <div class="card">
          <h3>üí¨ Top-quality support</h3>
          <p>Support from staff to help adjust setups and strategies to your driving style and boost confidence.</p>
        </div>
        <div class="card">
          <h3>üõ†Ô∏è Precise details</h3>
          <p>Battery usage, tyre wear, fuel info, and race strategy guidance to maximise race pace.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="pricing">
    <h2>Pricing & Purchasing</h2>
    <p style="opacity:0.92; margin-bottom: 20px;">
      Pick a plan, add it to your basket, then checkout with your preferred payment method.
    </p>

    <div class="features-wrapper">
      <div class="pricing-grid">

        <div class="price-card featured">
          <div class="badge">BEST VALUE</div>
          <h3>JCR Premium (Full Access)</h3>
          <div class="price">¬£14.99</div>
          <ul>
            <li>Quali + race esports-tested setups for every track until F1 26</li>
            <li>All strategies (battery, fuel, tyre info)</li>
            <li>Frequent updates</li>
            <li>Premium support tickets</li>
          </ul>
          <!-- NOTE: uses productId now -->
          <button class="btn small" type="button" onclick="addToBasket('premium')">Add to Basket</button>
        </div>

        <div class="price-card">
          <div class="badge">SETUPS ONLY</div>
          <h3>All Setups</h3>
          <div class="price">¬£12.99</div>
          <ul>
            <li>Quali + race setups for every track until F1 26</li>
            <li>Frequent updates</li>
            <li>Setup tuning tickets</li>
          </ul>
          <button class="btn small" type="button" onclick="addToBasket('setups')">Add to Basket</button>
        </div>

        <div class="price-card">
          <div class="badge">STRATEGIES</div>
          <h3>All Strategies</h3>
          <div class="price">¬£6.99</div>
          <ul>
            <li>All track strategies until F1 26</li>
            <li>Regular updates</li>
            <li>Tyre, battery + fuel info for every track</li>
          </ul>
          <button class="btn small" type="button" onclick="addToBasket('strategies')">Add to Basket</button>
        </div>

      </div>
    </div>
  </section>

  <section>
    <h2>Why Join JCR Setups Lab?</h2>
    <p>
      Whether you're Max Verstappen or Nicholas Latifi, JCR Setups Lab is the place to learn, improve performance, and win.
      We keep the price as low as possible while delivering top-tier value.
    </p>
  </section>

  <section id="league">
    <h2>JCR League</h2>

    <p style="opacity:0.92; margin-bottom: 20px;">
      Our official competitive racing league
    </p>

    <div class="features-wrapper">
      <div class="price-card featured">
        <div class="badge">üèÅ JCR LEAGUE</div>

        <h3>üèÅ JCR League</h3>

        <p>
          JCR League is our official competitive racing league, built for drivers who
          want clean racing, strong competition, and a professional environment.
        </p>

        <p>
          The league is closely linked with JCR Setups Lab. Using our premium setups and
          strategies will improve your performance and consistency on track in JCR and
          other leagues, while increasing your chances of winning the improved prize pool
          for Season 2!
        </p>

        <ul class="league-features">
          <li>‚úîÔ∏è Clean & competitive racing standards</li>
          <li>‚úîÔ∏è Organised seasons with full calendars</li>
          <li>‚úîÔ∏è Stewarding & race graphics</li>
          <li>‚úîÔ∏è Active community & events</li>
          <li>‚úîÔ∏è‚úçÔ∏è A Prize Pool for the winners in each Tier!üá¶</li>
        </ul>

        <p class="league-note">
          Whether you‚Äôre new to league racing or an experienced competitor,
          JCR League offers a place to race, improve, and compete at a high level.
        </p>

        <a href="https://linktr.ee/jcrleague" target="_blank" rel="noopener noreferrer" class="btn small">
          Join the League
        </a>
      </div>
    </div>
  </section>

  <footer>
    ¬© 2025 JCR Setups Lab | Not affiliated with or endorsed by EA Sports or Codemasters
  </footer>

  <!-- Basket Drawer -->
  <div class="basket-overlay" id="basketOverlay" onclick="toggleBasket(false)"></div>

  <aside class="basket-drawer" id="basketDrawer" aria-hidden="true">
    <div class="basket-header">
      <h3>Your Basket</h3>
      <button class="icon-btn" type="button" onclick="toggleBasket(false)" aria-label="Close basket">‚úï</button>
    </div>

    <div class="basket-items" id="basketItems"></div>

    <div class="basket-footer">
      <div class="basket-total">
        <span>Total</span>
        <strong id="basketTotal">¬£0.00</strong>
      </div>

      <p class="basket-note">Choose a checkout method below.</p>

      <div class="checkout-buttons">
        <a class="pay-btn stripe" id="stripeCheckoutBtn" href="#" target="_blank" rel="noopener noreferrer">
          Pay with Card / Apple Pay (Stripe)
        </a>
        <a class="pay-btn paypal" id="paypalCheckoutBtn" href="#" target="_blank" rel="noopener noreferrer">
          Pay with PayPal
        </a>
      </div>

      <small class="basket-small">
        Apple Pay/Google Pay appear automatically in Stripe Checkout when enabled and supported.
      </small>
    </div>
  </aside>

  <script>
    // ------- Stagger reveal for pricing cards -------
    document.addEventListener("DOMContentLoaded", () => {
      const pricingSection = document.querySelector("#pricing");
      const cards = document.querySelectorAll("#pricing .price-card");
      if (!pricingSection || !cards.length) return;

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;

          cards.forEach((card, i) => {
            card.style.transitionDelay = `${i * 140}ms`;
            card.classList.add("is-visible");
          });

          observer.disconnect();
        });
      }, { threshold: 0.2 });

      observer.observe(pricingSection);
    });

    // ------- Basket / checkout logic (PRODUCT IDS so it never breaks) -------
    const PRODUCTS = {
      premium: {
        name: "JCR Premium (Full Access)",
        price: 14.99,
        stripe: "https://buy.stripe.com/5kQ4gy9aIbzXcv64t86kg01"
      },
      setups: {
        name: "All Setups",
        price: 12.99,
        stripe: "https://buy.stripe.com/4gM6oG0EcbzX9iUbVA6kg02"
      },
      strategies: {
        name: "All Strategies",
        price: 6.99,
        stripe: "https://buy.stripe.com/eVq00i0EcfQdcv63p46kg03"
      }
    };

    const PAYPAL_USERNAME = "jackmaltbysmith";
    const CURRENCY_CODE = "GBP";
    const basket = []; // one item max

    function money(n){ return "¬£" + n.toFixed(2); }

    function paypalLinkForAmount(amount){
      return `https://paypal.me/${encodeURIComponent(PAYPAL_USERNAME)}/${amount.toFixed(2)}?currencyCode=${encodeURIComponent(CURRENCY_CODE)}`;
    }

    function setCheckoutState({ disabled, stripeHref="#", paypalHref="#", stripeText }){
      const stripeBtn = document.getElementById("stripeCheckoutBtn");
      const paypalBtn = document.getElementById("paypalCheckoutBtn");

      if (stripeBtn){
        stripeBtn.href = stripeHref;
        stripeBtn.style.pointerEvents = disabled ? "none" : "auto";
        stripeBtn.style.opacity = disabled ? "0.55" : "1";
        stripeBtn.textContent = stripeText || "Pay with Card / Apple Pay (Stripe)";
      }
      if (paypalBtn){
        paypalBtn.href = paypalHref;
        paypalBtn.style.pointerEvents = disabled ? "none" : "auto";
        paypalBtn.style.opacity = disabled ? "0.55" : "1";
      }
    }

    function updateCheckoutLinks(){
      if (basket.length === 0){
        setCheckoutState({ disabled: true, stripeText: "Add a product to checkout" });
        return;
      }

      const item = basket[0];
      const product = PRODUCTS[item.id];

      if (!product || !product.stripe){
        setCheckoutState({ disabled: true, stripeText: "Checkout not configured" });
        return;
      }

      setCheckoutState({
        disabled: false,
        stripeHref: product.stripe,
        paypalHref: paypalLinkForAmount(product.price),
        stripeText: "Pay with Card / Apple Pay (Stripe)"
      });
    }

    function updateBasketUI(){
      const basketCountEl = document.getElementById("basketCount");
      const basketItemsEl = document.getElementById("basketItems");
      const basketTotalEl = document.getElementById("basketTotal");

      if (basketCountEl) basketCountEl.textContent = basket.length;

      let total = 0;
      if (basketItemsEl) basketItemsEl.innerHTML = "";

      if (basket.length === 0){
        if (basketItemsEl) basketItemsEl.innerHTML = `<p style="opacity:0.85;">Your basket is empty.</p>`;
      } else {
        basket.forEach((item, idx) => {
          total += item.price;

          const div = document.createElement("div");
          div.className = "basket-item";
          div.innerHTML = `
            <div>
              <strong>${item.name}</strong>
              <span style="opacity:0.9;">${money(item.price)}</span>
            </div>
            <button class="remove-btn" type="button" onclick="removeFromBasket(${idx})">Remove</button>
          `;
          basketItemsEl.appendChild(div);
        });
      }

      if (basketTotalEl) basketTotalEl.textContent = money(total);
      updateCheckoutLinks();
    }

    // productId-based add (one item max)
    function addToBasket(productId){
      const p = PRODUCTS[productId];
      if (!p) return;

      basket.length = 0;
      basket.push({ id: productId, name: p.name, price: p.price });

      updateBasketUI();
      toggleBasket(true);
    }

    function removeFromBasket(index){
      basket.splice(index, 1);
      updateBasketUI();
    }

    function toggleBasket(open){
      const drawer = document.getElementById("basketDrawer");
      const overlay = document.getElementById("basketOverlay");
      if (!drawer || !overlay) return;

      if (open){
        drawer.classList.add("open");
        overlay.style.display = "block";
      } else {
        drawer.classList.remove("open");
        overlay.style.display = "none";
      }
    }

    // init
    updateBasketUI();
  </script>
</body>
</html>
